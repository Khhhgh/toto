OWNER_USERNAME = "@T_4IJ"  # يوزر المطور

async def get_group_owner(update=None, context=None):
    try:
        chat = update.effective_chat
        admins = await context.bot.get_chat_administrators(chat.id)
        for admin in admins:
            if admin.status == "creator":
                if admin.user.username:
                    return f"@{admin.user.username}"
                else:
                    return admin.user.first_name
    except:
        pass
    return "لا أستطيع معرفة مالك المجموعة."

replies = {
    "شلونك": "بخير 😊",
    "السلام عليكم": "وعليكم السلام 🌹",
    "مرحبا": "هلا 😊",
    "كيف الحال": "زين، شكراً 🙏",
    "شكرًا": "العفو 🤗",
    "مع السلامة": "في أمان الله 👋",
    "تصبح على خير": "وأنت من أهل الخير 🌙",
    "صباح الخير": "صباح النور ☀️",
    "مساء الخير": "مساء الورد 🌸",
    "المطور": OWNER_USERNAME,
    "المالك": get_group_owner,
    "اريد مساعدة": "تفضل 🙌",
    "كيف أستخدم البوت": "ارسل أمر أو كلمة وأنا أساعدك",
    "اريد لعب": "اكتب 'الالعاب' 🎮",
    "من أنت": "أنا بوت ماريا 🤖",
    "اريد معرفة الاوامر": "اكتب 'الأوامر' 📋",
    "كيف أطرد عضو": "رد على رسالته واكتب 'طرد' 🚫",
    "كيف أكتم عضو": "رد على رسالته واكتب 'كتم' 🔇",
    "هل البوت مجاني": "نعم مجاني 🎉",
    "هل يدعم الألعاب": "نعم، اكتب 'الالعاب' 🎲",
    "اريد لعب اكس او": "اكتب 'اكس او' 🔵❌",
    "كيف أوقف الألعاب": "اكتب 'تعطيل الألعاب' ⚙️",
    "هل يدعم الحماية": "نعم، يوجد حماية 🔒",
    "كيف أفتح الروابط": "اكتب 'فتح الروابط' 🔗",
    "كيف أقفل الروابط": "اكتب 'قفل الروابط' 🚫",
    "كيف أفعّل الاشتراك الاجباري": "مالك فقط، اكتب 'تفعيل الاشتراك' 🔐",
    "كيف أضيف قناة للاشتراك": "اكتب 'اضف قناة' مع المعرف 📢",
    "كيف أرسل إذاعة": "مالك فقط، اكتب 'ارسال اذاعة' 📣",
    "هل يمكن تعطيل البوت": "مالك فقط ⚠️",
    "كيف أغير ترحيب": "اكتب 'تعيين ترحيب' ✍️",
    "هل يمكن تعطيل الترحيب": "نعم، اكتب 'تعطيل الترحيب' 🚫",
    "كيف أرسل وداع": "اكتب 'تعيين وداع' 👋",
    "هل يمكن حذف رسالة": "رد على الرسالة واكتب 'حذف' 🧹",
    "كيف أعرف عدد الأعضاء": "اكتب 'عدد الأعضاء' 📊",
    "هل يدعم الردود": "نعم، اكتب كلمات عشان ارد عليك 🤖",
    "ما هي الأوامر": "اكتب 'الأوامر' لأعرضها 🔍",
    "هل يمكن تعديل الردود": "مالك فقط ✍️",
    "هل يعمل 24/7": "نعم مع استضافة ☁️",
    "كيف أبلغ عن مشكلة": "راسل @T_4IJ 🐞",
    "هل يمكن معرفة عدد المجموعات": "مالك فقط 📈",
    "هل يدعم لغات أخرى": "حالياً العربية 🇸🇦",
    "هل يمكن تعطيل الألعاب": "نعم، اكتب 'تعطيل الألعاب' 🔕",
    "كيف أبدأ لعبة خمن": "اكتب 'خمن' 🔍",
    "هل يمكن معرفة المشرفين": "مالك فقط 👥",
    "هل يمكن إرسال رسائل خاصة": "رد واكتب 'رسالة خاصة' 📩",
    "هل يمكن معرفة عدد المحظورين": "نعم 🚫",
    "هل يمكن تفعيل حذف الرسائل المكررة": "نعم 🔄",
    "هل يمكن منع الصور": "نعم، 'قفل الصور' 🖼️",
    "هل يمكن منع الفيديو": "نعم، 'قفل الفيديو' 🎥",
    "هل يمكن معرفة من دخل جديد": "نعم، ترحيب تلقائي 👋",
    "هل يمكن تعطيل الاشتراك": "مالك فقط ⚙️",
    "هل يمكن رفع مشرف جديد": "مالك فقط 👑",
    "هل يمكن تنزيل مشرف": "مالك فقط 👎",
    "هل يمكن معرفة معلومات عضو": "رد واكتب 'معلومات' 📇",
    "هل يمكن تفعيل الكتم": "نعم، 'كتم' 🔇",
    "هل يمكن تعطيل الردود": "نعم، اكتب 'تعطيل الردود' 🚫",
    "هل يمكن إرسال صور": "نعم 🖼️",
    "هل يمكن إرسال ملفات": "نعم 📄",
    "هل يمكن إرسال رسائل صوتية": "نعم 🎤",
    "هل يمكن تعطيل الرسائل الخاصة": "نعم 🔕",
    "هل يمكن تفعيل الاشتراك عبر قناة": "نعم 🔐",
}

def get_reply(text):
    import asyncio
    text = text.strip().lower()
    reply = replies.get(text)

    # إذا الرد عبارة عن دالة (مثل get_group_owner)
    if callable(reply):
        # نرجع coroutine جاهز، لازم ينتظر من الدالة الرئيسية
        return reply
    return reply
